<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>üéæ –¢–µ–Ω–Ω–∏—Å–Ω—ã–π —Å—á–µ—Ç—á–∏–∫</title>
    <link rel="stylesheet" href="style-mobile.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="mainScreen" class="screen active">
        <header class="app-header">
            <div class="header-content">
                <h1><i class="fas fa-table-tennis-paddle-ball"></i> –°—á–µ—Ç—á–∏–∫</h1>
                <button class="icon-btn" id="menuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            <div class="match-info-bar">
                <div class="match-info-item">
                    <span class="info-label">–°–µ—Ç</span>
                    <span class="info-value" id="currentSetMobile">1</span>/<span id="totalSetsMobile">5</span>
                </div>
                <div class="match-info-item">
                    <span class="info-label">–î–æ</span>
                    <span class="info-value" id="pointsToWinMobile">11</span>
                </div>
                <div class="match-info-item">
                    <span class="info-label">–†–∞–∑–Ω–∏—Ü–∞</span>
                    <span class="info-value">2</span>
                </div>
            </div>
        </header>

        <main class="main-content">
            <!-- –ò–≥—Ä–æ–∫ 1 -->
            <div class="player-card player-1 active-player" id="player1Card">
                <div class="player-header">
                    <div class="player-info">
                        <div class="player-color-indicator" style="background-color: #3498db;"></div>
                        <input type="text" class="player-name-input" value="–ò–≥—Ä–æ–∫ 1" id="player1Name" maxlength="12">
                    </div>
                    <div class="player-score-badge" id="setsCount1">0</div>
                </div>
                
                <div class="score-display-container">
                    <div class="score-display" id="score1Mobile">0</div>
                    <div class="score-label">–û—á–∫–∏</div>
                </div>
                
                <div class="player-controls">
                    <button class="control-btn minus-btn" data-player="1">
                        <i class="fas fa-minus"></i>
                    </button>
                    <div class="quick-add-buttons">
                        <button class="quick-add-btn" data-player="1" data-points="1">+1</button>
                        <button class="quick-add-btn" data-player="1" data-points="2">+2</button>
                        <button class="quick-add-btn" data-player="1" data-points="3">+3</button>
                    </div>
                    <button class="control-btn plus-btn" data-player="1">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="center-panel">
                <div class="vs-circle">
                    <span>VS</span>
                </div>
                <div class="center-controls">
                    <button class="center-btn" id="swapPlayersBtn">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                    <button class="center-btn" id="resetPointsBtn">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
            </div>

            <!-- –ò–≥—Ä–æ–∫ 2 -->
            <div class="player-card player-2" id="player2Card">
                <div class="player-header">
                    <div class="player-info">
                        <input type="text" class="player-name-input" value="–ò–≥—Ä–æ–∫ 2" id="player2Name" maxlength="12">
                        <div class="player-color-indicator" style="background-color: #e74c3c;"></div>
                    </div>
                    <div class="player-score-badge" id="setsCount2">0</div>
                </div>
                
                <div class="score-display-container">
                    <div class="score-display" id="score2Mobile">0</div>
                    <div class="score-label">–û—á–∫–∏</div>
                </div>
                
                <div class="player-controls">
                    <button class="control-btn minus-btn" data-player="2">
                        <i class="fas fa-minus"></i>
                    </button>
                    <div class="quick-add-buttons">
                        <button class="quick-add-btn" data-player="2" data-points="1">+1</button>
                        <button class="quick-add-btn" data-player="2" data-points="2">+2</button>
                        <button class="quick-add-btn" data-player="2" data-points="3">+3</button>
                    </div>
                    <button class="control-btn plus-btn" data-player="2">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–µ—Ç–æ–≤ -->
            <div class="sets-indicator">
                <h3><i class="fas fa-trophy"></i> –°–µ—Ç—ã</h3>
                <div class="sets-container" id="setsMobile">
                    <!-- –°–µ—Ç—ã –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
            </div>

            <!-- –ü–∞–Ω–µ–ª—å –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π -->
            <div class="quick-actions">
                <button class="action-btn new-set-btn" id="newSetBtnMobile">
                    <i class="fas fa-plus-circle"></i>
                    <span>–ù–æ–≤—ã–π —Å–µ—Ç</span>
                </button>
                <button class="action-btn new-match-btn" id="newMatchBtnMobile">
                    <i class="fas fa-play-circle"></i>
                    <span>–ù–æ–≤–∞—è –∏–≥—Ä–∞</span>
                </button>
                <button class="action-btn history-btn" id="historyBtn">
                    <i class="fas fa-history"></i>
                    <span>–ò—Å—Ç–æ—Ä–∏—è</span>
                </button>
            </div>
        </main>

        <div class="bottom-nav">
            <button class="nav-btn active" data-screen="main">
                <i class="fas fa-home"></i>
                <span>–ò–≥—Ä–∞</span>
            </button>
            <button class="nav-btn" data-screen="settings">
                <i class="fas fa-cog"></i>
                <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </button>
            <button class="nav-btn" data-screen="stats">
                <i class="fas fa-chart-bar"></i>
                <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
            </button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="settingsScreen" class="screen">
        <header class="app-header">
            <div class="header-content">
                <button class="icon-btn back-btn" data-screen="main">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2><i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <div style="width: 44px;"></div>
            </div>
        </header>

        <main class="settings-content">
            <div class="settings-section">
                <h3><i class="fas fa-gamepad"></i> –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h3>
                <div class="settings-group">
                    <label class="settings-item">
                        <span>–°–µ—Ç–æ–≤ –¥–ª—è –ø–æ–±–µ–¥—ã:</span>
                        <select id="setsToWinSelect" class="settings-select">
                            <option value="2">2 –∏–∑ 3</option>
                            <option value="3" selected>3 –∏–∑ 5</option>
                            <option value="4">4 –∏–∑ 7</option>
                        </select>
                    </label>
                    
                    <label class="settings-item">
                        <span>–û—á–∫–æ–≤ –≤ —Å–µ—Ç–µ:</span>
                        <select id="pointsPerSetSelect" class="settings-select">
                            <option value="11" selected>11 –æ—á–∫–æ–≤</option>
                            <option value="21">21 –æ—á–∫–æ</option>
                        </select>
                    </label>
                    
                    <label class="settings-item">
                        <span>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞:</span>
                        <select id="minLeadSelectMobile" class="settings-select">
                            <option value="2" selected>2 –æ—á–∫–∞</option>
                            <option value="1">1 –æ—á–∫–æ</option>
                        </select>
                    </label>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-user"></i> –ò–≥—Ä–æ–∫–∏</h3>
                <div class="settings-group">
                    <div class="player-settings">
                        <div class="player-settings-item">
                            <div class="player-color-preview" style="background-color: #3498db;"></div>
                            <input type="text" class="settings-input" id="player1SettingsName" value="–ò–≥—Ä–æ–∫ 1">
                            <button class="color-picker-btn" data-player="1">
                                <i class="fas fa-palette"></i>
                            </button>
                        </div>
                        
                        <div class="player-settings-item">
                            <div class="player-color-preview" style="background-color: #e74c3c;"></div>
                            <input type="text" class="settings-input" id="player2SettingsName" value="–ò–≥—Ä–æ–∫ 2">
                            <button class="color-picker-btn" data-player="2">
                                <i class="fas fa-palette"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="settings-section">
                <h3><i class="fas fa-bell"></i> –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                <div class="settings-group">
                    <label class="toggle-item">
                        <span>–ó–≤—É–∫ –ø—Ä–∏ –æ—á–∫–µ</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="soundToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </label>
                    
                    <label class="toggle-item">
                        <span>–í–∏–±—Ä–∞—Ü–∏—è</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="vibrationToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </label>
                    
                    <label class="toggle-item">
                        <span>–ê–≤—Ç–æ-–Ω–æ–≤—ã–π —Å–µ—Ç</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoNewSetToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </label>
                </div>
            </div>

            <div class="settings-actions">
                <button class="save-settings-btn" id="saveSettingsMobile">
                    <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
            </div>
        </main>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div id="statsScreen" class="screen">
        <header class="app-header">
            <div class="header-content">
                <button class="icon-btn back-btn" data-screen="main">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2><i class="fas fa-chart-bar"></i> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div style="width: 44px;"></div>
            </div>
        </header>

        <main class="stats-content">
            <div class="stats-summary">
                <div class="stat-card">
                    <div class="stat-value" id="totalPoints">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –æ—á–∫–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalSets">0</div>
                    <div class="stat-label">–°—ã–≥—Ä–∞–Ω–æ —Å–µ—Ç–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="matchDuration">0:00</div>
                    <div class="stat-label">–í—Ä–µ–º—è –∏–≥—Ä—ã</div>
                </div>
            </div>

            <div class="stats-section">
                <h3><i class="fas fa-chart-pie"></i> –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤</h3>
                <div class="points-distribution">
                    <div class="distribution-player">
                        <div class="player-dist-label">–ò–≥—Ä–æ–∫ 1</div>
                        <div class="distribution-bar">
                            <div class="distribution-fill player-1-fill" style="width: 50%"></div>
                        </div>
                        <div class="distribution-percent">50%</div>
                    </div>
                    <div class="distribution-player">
                        <div class="player-dist-label">–ò–≥—Ä–æ–∫ 2</div>
                        <div class="distribution-bar">
                            <div class="distribution-fill player-2-fill" style="width: 50%"></div>
                        </div>
                        <div class="distribution-percent">50%</div>
                    </div>
                </div>
            </div>

            <div class="stats-section">
                <h3><i class="fas fa-history"></i> –ü–æ—Å–ª–µ–¥–Ω–∏–µ –º–∞—Ç—á–∏</h3>
                <div class="matches-history" id="matchesHistory">
                    <!-- –ò—Å—Ç–æ—Ä–∏—è –º–∞—Ç—á–µ–π -->
                </div>
            </div>

            <div class="stats-actions">
                <button class="export-btn" id="exportStatsBtn">
                    <i class="fas fa-share"></i> –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
                </button>
            </div>
        </main>
    </div>

    <!-- –ò—Å—Ç–æ—Ä–∏—è –≤ –≤–∏–¥–µ bottom sheet -->
    <div id="historySheet" class="bottom-sheet">
        <div class="sheet-header">
            <div class="sheet-handle"></div>
            <h3><i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</h3>
            <button class="close-sheet" id="closeHistorySheet">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="sheet-content">
            <div id="historyList" class="history-list">
                <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <!-- –ü–æ–±–µ–¥–∞ –≤ —Å–µ—Ç–µ - –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="setWinNotification" class="notification">
        <div class="notification-content">
            <i class="fas fa-trophy"></i>
            <div class="notification-text">
                <div class="notification-title" id="setWinTitle"></div>
                <div class="notification-subtitle" id="setWinSubtitle"></div>
            </div>
        </div>
    </div>

    <!-- –í—ã–±–æ—Ä —Ü–≤–µ—Ç–∞ -->
    <div id="colorPicker" class="color-picker-modal">
        <div class="color-picker-header">
            <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç</h3>
            <button class="close-color-picker">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="color-picker-grid">
            <!-- –¶–≤–µ—Ç–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
        </div>
    </div>

    <!-- Overlay –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω -->
    <div id="overlay" class="overlay"></div>

    <script src="script-mobile.js"></script>
</body>
</html>
